import classnames from "https://cdn.skypack.dev/classnames@2.3.1"

export const TrafficLights = ({ className, noPadding, rightAccessory }) => {
  return (
    <div className={`flex flex-row items-center pr-4 ${className}`}>
      <div
        className={`flex flex-row flex-grow items-center ${
          noPadding ? "px-0 py-0" : "px-4 py-4"
        }`}>
        <div className="rounded-full w-3 h-3 bg-red-500 mr-2" />
        <div className="rounded-full w-3 h-3 bg-yellow-500 mr-2" />
        <div className="rounded-full w-3 h-3 bg-green-500" />
      </div>
      { rightAccessory &&
        <div className="flex-none">
          {rightAccessory}
        </div>
      }
    </div>
  )
}

<TrafficLights rightAccessory={<>Hello</>}/>

export const LargeCTAButton = ({
  title,
  href,
  onClick,
  target = "_blank",
  type = "submit",
  disabled = false,
  loading = false,
  centered,
  className,
  lightBlue,
  small,
  Component = "a",
}) => {
  return (
    <div className={className}>
      <Component
        type={type}
        className={classnames(
          "relative block w-min text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white self-center whitespace-nowrap cursor-pointer disabled:cursor-not-allowed transition ease-in-out duration-200 transform select-none no-underline font-medium antialiased px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg rounded-md sm:rounded-lg",
          {
              "focus:ring-offset-sky-300 bg-sky-500 hover:bg-sky-600 disabled:bg-sky-300": lightBlue,
              "focus:ring-offset-blueGray-400 bg-blueGray-900 hover:bg-blueGray-700 disabled:bg-blueGray-300": !lightBlue,
              "mx-auto": centered,
              "bg-blueGray-300 cursor-not-allowed": loading
          })}
        disabled={loading || disabled}
        href={href}
        target={target}
        rel="noreferrer"
      >
        {/* Ensure Tailwind class is loaded */}
        <div className="opacity-0" />
        <div className={`self-center ${loading ? "opacity-0" : "opacity-100"}`}>
          {title}
        </div>
        {loading && (
          <i className="absolute left-0 right-0 top-0 bottom-0 flex justify-center">
            <LoadingDots />
          </i>
        )}
      </Component>
    </div>
  )
}

export const LargeCTALink = ({
  title,
  href,
  onClick,
  target = "_blank",
  centered,
  className,
}) => {
  return (
    <div className={className}>
      <a
        className={`relative block w-min rounded-md sm:rounded-lg text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blueGray-400 focus:ring-white self-center bg-blueGray-900 hover:bg-blueGray-700 disabled:bg-blueGray-300 whitespace-nowrap cursor-pointer disabled:cursor-not-allowed transition ease-in-out duration-200 transform select-none no-underline font-semibold px-3 sm:px-6 py-2 sm:py-3 text-base sm:text-lg antialiased ${
          centered ? "mx-auto" : ""
        }`}
        href={href}
        onClick={onClick}
        target={target}
        rel="noreferrer"
      >
        {title}
      </a>
    </div>
  )
}

export const LoadingDots = ({ className }) => {
  return (
    <span className="loading-dots">
      <span className="dot-1" />
      <span className="dot-2" />
      <span className="dot-3" />
    </span>
  )
}

<LargeCTAButton loading title="Request early access →" className="mb-2" />
<LargeCTAButton lightBlue title="Request early access →" className="mb-2" />

export const AnimatedCaret = () => {
  return (
    <span className="inline-block animate-caret rounded-full h-[40px] sm:h-[54px] lg:h-[56px] w-[4px] sm:w-[5px] bg-[#15E3FF] mb-[-8px] sm:mb-[-11px] lg:mb-[-12px] ml-[3px] sm:ml-[4px]" />
  )
}

{/* prettier-ignore */}
<h1 className="max-w-screen-lg text-4xl sm:text-6xl lg:text-7xl leading-none font-extrabold tracking-tight text-blueGray-900 mb-8 sm:mb-10 text-center mx-auto">Programmable blogs<br className="hidden sm:block"/>{" "}for developers<AnimatedCaret /></h1>

export const CodeSample = ({ panelClassName, noPadding, children }) => {
  return (
    <div className="flex flex-col overflow-hidden bg-gray-50 border border-gray-200 rounded-md">
      <div className={`px-8 py-4 ${panelClassName || ""}`}>
        {children.slice(0, -1)}
      </div>
      <div className="bg-blueGray-900 px-2 -mb-2 max-h-[300px] overflow-y-auto">
        <div className="mt-[-10px]">{children.slice(-1)}</div>
      </div>
    </div>
  )
}

export const CodeResult = ({ children, className }) => {
  return (
    <div
      className={`p-8 bg-gray-50 border border-gray-200 rounded-md mb-2 ${className}`}
    >
      {children}
    </div>
  )
}

<CodeResult>Test</CodeResult>

export const EditorCode = ({ children }) => {
  return <div className="editor">{children}</div>
}

{/* prettier-ignore */}
```md
# Heading 1
## Heading 2
### Heading 3
#### Heading 4
```

{/* prettier-ignore */}
<CodeSample>
  <div className="prose">
    # Heading 1
    ## Heading 2
    ### Heading 3
    #### Heading 4
  </div>
{/* prettier-ignore */}
```md
# Heading 1
## Heading 2
### Heading 3
#### Heading 4
```

{/* prettier-ignore */}
</CodeSample>

export const SidebarToggleIcon = ({
  className,
  width,
  height,
  viewBox,
  strokeWidth,
}) => {
  return (
    <svg
      className={className}
      width={width || "30"}
      height={height || "30"}
      viewBox={viewBox || "0 0 30 30"}
      fill="currentColor"
      strokeWidth={strokeWidth || 1.5}
    >
      <path
        d="M6 10C6 8.89543 6.89543 8 8 8H13V22H8C6.89543 22 6 21.1046 6 20V10Z"
        fill="#D4D4D4"
        stroke="#A3A3A3"
      />
      <rect
        x="6"
        y="8"
        width="18"
        height="14"
        rx="2"
        fill="none"
        stroke="#A3A3A3"
      />
    </svg>
  )
}

<SidebarToggleIcon />

export const Note = ({ children, className, variant }) => {
  return (
    <div className={className}>
      <div
        className={classnames(
          "flex align-center items-start border rounded-md px-4 py-2 m-0 leading-relaxed text-[15px]",
          {
            "bg-sky-50 text-sky-700 border-sky-100": variant !== "note",
            "bg-amber-50 text-amber-700 border-amber-100": variant === "note",
          }
        )}
      >
        <InfoIcon
          className={classnames("w-6 h-6 mr-3 flex-none mt-[18px]", {
            "text-lightBlue-400": variant !== "note",
            "text-amber-400": variant === "note",
          })}
        />
        <div>{children}</div>
      </div>
    </div>
  )
}

export const InfoIcon = ({ className }) => (
  <svg
    className={className}
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      strokeWidth={2}
      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
    />
  </svg>
)

<div className="prose">
  <Note>
    Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem
    ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum. Lorem ipsum.
    Lorem ipsum. Lorem ipsum. Lorem ipsum.{" "}
  </Note>
</div>

export const MiniKey = ({ symbol, variable }) => {
  return (
    <div
      className={`inline-block items-center text-center justify-center h-5 bg-gray-100 border border-gray-300 rounded text-gray-500 text-xs font-medium select-none transform translate-y-[-2px] mt-0 mb-0 ${
        !variable ? "w-5" : "px-1"
      }`}
    >
      <div
        style={{ marginTop: 0 }}
        className="w-full h-full flex items-center align-center justify-center"
      >
        {symbol}
      </div>
    </div>
  )
}

export const _isMacLike = () => {
  if (typeof navigator === "undefined") {
    return false
  }
  return /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)
}

export const Keys = ({
  cmd,
  shift,
  alt,
  hatCtrl,
  chars,
  char,
  plain,
  small,
  dark,
}) => {
  const isMacLike = _isMacLike()
  return (
    <span
      className={classnames(
        "inline-block font-medium antialiased text-sm mx-0.5 mt-0 mb-0 select-none",
        {
          "text-xs": small,
          "text-gray-400 opacity-70": plain,
          "px-1 py-[1px] border border-gray-200 rounded text-gray-500 text-opacity-80":
            !plain,
          "bg-gray-100": dark && !plain,
          "bg-gray-50": !dark && !plain,
        }
      )}
    >
      {cmd && <span className="px-[2px]">{isMacLike ? "⌘" : "Ctrl"}</span>}
      {hatCtrl && <span className="px-[2px]">{isMacLike ? "^" : "Ctrl"}</span>}
      {shift && <span className="px-[2px]">⇧</span>}
      {alt && <span className="px-[2px]">{isMacLike ? "⌥" : "Alt"}</span>}
      {chars &&
        chars.map((c, i) => (
          <span key={`key-${i}-${c}`} className="px-[2px]">
            {c}
          </span>
        ))}
      {char && <span className="px-[2px]">{char}</span>}
    </span>
  )
}

<Keys cmd char="C" />

export const Cmd = () => {
  return _isMacLike() ? <CmdMac /> : <CmdWin />
}

export const CmdMac = () => <MiniKey variable={false} symbol="⌘" />

export const CmdWin = () => <MiniKey variable={true} symbol="Ctrl" />

export const AltMac = () => <MiniKey variable={false} symbol="⌥" />

export const AltWin = () => <MiniKey variable={true} symbol="Alt" />

export const Shift = () => <MiniKey variable={false} symbol="⇧" />

export const HatCtrlMac = () => <MiniKey variable={false} symbol="^" />

Baseline text: <CmdMac /><Shift /><AltMac />

export const HelpButton = () => (
  <span className="inline-block rounded-full bg-blueGray-900 text-white w-5 h-5 mt-0 mb-0">
    <span
      className="flex w-full h-full justify-center align-center"
      style={{ marginTop: -4 }}
    >
      ?
    </span>
  </span>
)

<div className="prose">
  <HelpButton />
</div>

export const Browser = ({ baseUrl, path, className }) => {
  return (
    <div className={className}>
      <div className="border border-gray-200 shadow-xl rounded-t-lg rounded-b overflow-hidden">
        <div className="flex flex-row w-full bg-white px-5 py-3 gap-x-2 items-center">
          <TrafficLights noPadding />
          <svg
            className="ml-2 h-5 w-5 text-gray-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M15 19l-7-7 7-7"
            />
          </svg>
          <svg
            className="h-5 w-5 text-gray-300"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M9 5l7 7-7 7"
            />
          </svg>
          <div className="flex flex-1 justify-center">
            <div className="flex-1 bg-gray-50 border border-gray-200 rounded-md px-2 py-[6px] mx-2 max-w-xs text-center text-xs text-lightBlue-500 truncate select-none">
              {baseUrl}
              <span className="text-gray-400">/{path}</span>
            </div>
          </div>
          <div className="w-12" />
        </div>
        <div className="w-full bg-gray-100 border-t border-gray-200 h-6" />
      </div>
    </div>
  )
}

<Browser baseUrl="motif.land" path="welcome" />

export const FileTreeItem = ({ file, open, indent, label, live }) => {
  return (
    <div
      className={`relative flex flex-row items-center py-1 text-gray-900 select-none pl-[${
        8 + (indent || 0) * 24
      }px]`}
    >
      {file && <FileIcon live={live} className="w-5 h-5 text-gray-200" />}
      {!file && open && <FolderOpenIcon className="w-5 h-5 text-[#15E3FF]" />}
      {!file && !open && (
        <FolderClosedIcon className="w-5 h-5 text-[#15E3FF]" />
      )}
      <span className="ml-2 text-sm font-medium">{label}</span>
    </div>
  )
}

export const FolderClosedIcon = ({ className }) => (
  <svg
    className={className}
    width={"20"}
    height={"20"}
    viewBox={"0 0 20 20"}
    fill="currentColor"
    strokeWidth={1.5}
  >
    <path d="M2 6C2 4.89543 2.89543 4 4 4H9L11 6H16C17.1046 6 18 6.89543 18 8V14C18 15.1046 17.1046 16 16 16H4C2.89543 16 2 15.1046 2 14V6Z" />
  </svg>
)

export const FolderOpenIcon = ({ className }) => (
  <svg
    className={className}
    width={"20"}
    height={"20"}
    viewBox={"0 0 20 20"}
    fill="currentColor"
    strokeWidth={1.5}
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2 6C2 4.89543 2.89543 4 4 4H8L10 6H14C15.1046 6 16 6.89543 16 8V9H8C6.34315 9 5 10.3431 5 12V13.5C5 14.3284 4.32843 15 3.5 15C2.67157 15 2 14.3284 2 13.5V6Z"
    />
    <path d="M6 12C6 10.8954 6.89543 10 8 10H16C17.1046 10 18 10.8954 18 12V14C18 15.1046 17.1046 16 16 16H2H4C5.10457 16 6 15.1046 6 14V12Z" />
  </svg>
)

export const FileIcon = ({ className, live }) => (
  <svg
    className={className}
    width={"20"}
    height={"20"}
    viewBox={"0 0 20 20"}
    fill="currentColor"
    strokeWidth={1.5}
  >
    {live && (
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V16C4 16.5304 4.21071 17.0391 4.58579 17.4142C4.96086 17.7893 5.46957 18 6 18H14C14.5304 18 15.0391 17.7893 15.4142 17.4142C15.7893 17.0391 16 16.5304 16 16V7.414C15.9999 6.88361 15.7891 6.37499 15.414 6L12 2.586C11.625 2.2109 11.1164 2.00011 10.586 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579ZM13.7071 10.2071C14.0976 9.81658 14.0976 9.18342 13.7071 8.79289C13.3166 8.40237 12.6834 8.40237 12.2929 8.79289L9 12.0858L7.70711 10.7929C7.31658 10.4024 6.68342 10.4024 6.29289 10.7929C5.90237 11.1834 5.90237 11.8166 6.29289 12.2071L8.29289 14.2071C8.68342 14.5976 9.31658 14.5976 9.70711 14.2071L13.7071 10.2071Z"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    )}
    {!live && (
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M4.00012 4C4.00012 2.89543 4.89555 2 6.00012 2H10.5859C11.1163 2 11.625 2.21071 12.0001 2.58579L15.4143 6C15.7894 6.37507 16.0001 6.88378 16.0001 7.41421V16C16.0001 17.1046 15.1047 18 14.0001 18H6.00012C4.89555 18 4.00012 17.1046 4.00012 16V4ZM6.00012 10C6.00012 9.44772 6.44784 9 7.00012 9H13.0001C13.5524 9 14.0001 9.44772 14.0001 10C14.0001 10.5523 13.5524 11 13.0001 11H7.00012C6.44784 11 6.00012 10.5523 6.00012 10ZM7.00012 13C6.44784 13 6.00012 13.4477 6.00012 14C6.00012 14.5523 6.44784 15 7.00012 15H13.0001C13.5524 15 14.0001 14.5523 14.0001 14C14.0001 13.4477 13.5524 13 13.0001 13H7.00012Z"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    )}
  </svg>
)

<FileTreeItem open label="Blog" />
<FileTreeItem file live label="Index" />
<FileTreeItem file live indent={1} label="Index" />
<FileTreeItem file indent={1} label="Welcome to my blog" />

export const ScreenBleed = ({ children, className }) => {
  return (
    <div className={`-mx-6 sm:-mx-6 md:-mx-8 w-screen ${className}`}>
      {children}
    </div>
  )
}

export const Cursor = ({ color }) => {
  return <span className="inline relative w-0">
    <span className={`absolute left-0 top-0 mt-[0px] h-[20px] w-[2px] rounded-full bg-${color}-400`} />
  </span>
}